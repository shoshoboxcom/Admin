<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Adopt Me ‚Äî –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f; --surface: #13131a; --border: #1e1e2e;
    --accent: #9403fc; --accent2: #ff3c78; --text: #e8e8f0;
    --muted: #555570; --green: #00e87a; --red: #ff3c78;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
  body { font-family: 'Space Mono', monospace; background: var(--bg); color: var(--text); min-height: 100vh; font-size: 14px; }

  /* LOGIN */
  #login-screen { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 16px; }
  .login-box { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 36px 24px; width: 100%; max-width: 360px; text-align: center; }
  .login-logo { font-family: 'Syne', sans-serif; font-size: clamp(22px,6vw,28px); font-weight: 800; background: linear-gradient(135deg,var(--accent),var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 6px; }
  .login-sub { color: var(--muted); font-size: 11px; margin-bottom: 28px; letter-spacing: 2px; }
  .login-input { width: 100%; background: var(--bg); border: 1px solid var(--border); border-radius: 10px; padding: 14px 16px; color: var(--text); font-family: 'Space Mono', monospace; font-size: 16px; margin-bottom: 14px; outline: none; transition: border-color 0.2s; text-align: center; letter-spacing: 3px; }
  .login-input:focus { border-color: var(--accent); }
  .login-btn { width: 100%; background: linear-gradient(135deg,var(--accent),var(--accent2)); border: none; border-radius: 10px; padding: 15px; color: #fff; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 14px; letter-spacing: 2px; cursor: pointer; touch-action: manipulation; }
  .login-btn:active { opacity: 0.8; }
  .login-error { color: var(--red); font-size: 12px; margin-top: 10px; display: none; }

  /* MAIN */
  #main-panel { display: none; }
  header { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px; border-bottom: 1px solid var(--border); background: var(--surface); position: sticky; top: 0; z-index: 100; gap: 10px; }
  .header-left { font-family: 'Syne', sans-serif; font-weight: 800; font-size: clamp(15px,4vw,20px); background: linear-gradient(135deg,var(--accent),var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; white-space: nowrap; }
  .header-right { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; justify-content: flex-end; }
  .save-btn { background: linear-gradient(135deg,var(--accent),var(--accent2)); border: none; border-radius: 8px; padding: 10px 16px; color: #fff; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 12px; letter-spacing: 1px; cursor: pointer; transition: opacity 0.2s; touch-action: manipulation; white-space: nowrap; }
  .save-btn:active { opacity: 0.8; }
  .save-btn:disabled { opacity: 0.4; cursor: not-allowed; }
  .logout-btn { background: transparent; border: 1px solid var(--border); border-radius: 8px; padding: 10px 12px; color: var(--muted); font-family: 'Space Mono', monospace; font-size: 11px; cursor: pointer; touch-action: manipulation; white-space: nowrap; }
  .logout-btn:active { border-color: var(--red); color: var(--red); }

  .status-bar { padding: 0 16px; }
  .status-msg { font-size: 12px; padding: 10px 14px; border-radius: 8px; display: none; margin: 10px 0 0; text-align: center; }
  .status-msg.success { background: rgba(0,232,122,0.1); color: var(--green); border: 1px solid rgba(0,232,122,0.2); }
  .status-msg.error   { background: rgba(255,60,120,0.1); color: var(--red);   border: 1px solid rgba(255,60,120,0.2); }
  .status-msg.loading { background: rgba(148,3,252,0.1);  color: var(--accent);border: 1px solid rgba(148,3,252,0.2); }
  .status-msg.show    { display: block; }

  .container { padding: 16px; max-width: 960px; margin: 0 auto; }

  /* STATS */
  .stats-row { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; margin-bottom: 20px; }
  .stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 14px 8px; text-align: center; }
  .stat-num { font-family: 'Syne', sans-serif; font-size: clamp(22px,6vw,32px); font-weight: 800; line-height: 1; margin-bottom: 4px; }
  .stat-num.green  { color: var(--green); }
  .stat-num.red    { color: var(--red); }
  .stat-num.purple { background: linear-gradient(135deg,var(--accent),var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .stat-label { color: var(--muted); font-size: 9px; letter-spacing: 1.5px; }

  /* TOOLBAR */
  .toolbar { margin-bottom: 16px; }
  .search-box { width: 100%; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 12px 14px; color: var(--text); font-family: 'Space Mono', monospace; font-size: 16px; outline: none; transition: border-color 0.2s; }
  .search-box:focus { border-color: var(--accent); }

  /* PET GRID */
  .pet-grid { display: flex; flex-direction: column; gap: 20px; }

  /* PET CARD */
  .pet-card { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 16px; display: flex; flex-direction: column; gap: 16px; }
  .pet-card.globally-off { opacity: 0.55; }

  .pet-card-top { display: flex; align-items: center; gap: 12px; }
  .pet-img { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; background: var(--bg); flex-shrink: 0; }
  .pet-info { flex: 1; min-width: 0; }
  .pet-name { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 16px; margin-bottom: 6px; }
  .badge { font-size: 9px; padding: 2px 7px; border-radius: 4px; font-weight: 700; letter-spacing: 1px; display: inline-block; }
  .badge-rarity-common     { background: rgba(0,191,255,0.15); color: #00bfff; }
  .badge-rarity-uncommon   { background: rgba(153,0,255,0.15); color: #bb55ff; }
  .badge-rarity-rare       { background: rgba(0,224,30,0.15);  color: #00e01e; }
  .badge-rarity-ultra-rare { background: rgba(255,0,0,0.15);   color: #ff4444; }
  .badge-rarity-legendary  { background: rgba(128,128,128,0.15); color: #aaa; }

  .section-title { font-size: 10px; letter-spacing: 2px; color: var(--muted); font-weight: 700; text-transform: uppercase; margin-bottom: 10px; }

  /* GLOBAL TOGGLE */
  .toggle-wrap { display: flex; flex-direction: column; align-items: center; gap: 4px; flex-shrink: 0; }
  .toggle { position: relative; width: 52px; height: 28px; cursor: pointer; touch-action: manipulation; }
  .toggle input { opacity: 0; width: 0; height: 0; }
  .slider { position: absolute; inset: 0; background: var(--border); border-radius: 28px; transition: 0.25s; }
  .slider::before { content:''; position: absolute; width: 20px; height: 20px; left: 4px; bottom: 4px; background: var(--muted); border-radius: 50%; transition: 0.25s; }
  input:checked + .slider { background: rgba(0,232,122,0.25); border: 1px solid var(--green); }
  input:checked + .slider::before { transform: translateX(24px); background: var(--green); }
  .toggle-label { font-size: 9px; letter-spacing: 1px; font-weight: 700; }
  .toggle-label.in  { color: var(--green); }
  .toggle-label.out { color: var(--red); }

  /* VARIANTS SECTION */
  .variants-section { background: var(--bg); border: 1px solid var(--border); border-radius: 12px; padding: 14px; }
  .variants-list { display: flex; flex-direction: column; gap: 8px; }

  .variant-row {
    background: var(--surface);
    border: 1.5px solid var(--border);
    border-radius: 10px;
    padding: 10px 12px;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: border-color 0.2s, background 0.2s, opacity 0.2s;
  }
  .variant-row.v-in  { border-color: rgba(0,232,122,0.3); background: rgba(0,232,122,0.03); }
  .variant-row.v-out { border-color: rgba(255,60,120,0.2); background: rgba(255,60,120,0.03); opacity: 0.55; }

  /* Mini toggle */
  .mini-toggle { position: relative; width: 38px; height: 22px; cursor: pointer; touch-action: manipulation; flex-shrink: 0; }
  .mini-toggle input { opacity: 0; width: 0; height: 0; }
  .mini-slider { position: absolute; inset: 0; background: var(--border); border-radius: 22px; transition: 0.2s; }
  .mini-slider::before { content:''; position: absolute; width: 14px; height: 14px; left: 4px; bottom: 4px; background: var(--muted); border-radius: 50%; transition: 0.2s; }
  .mini-toggle input:checked + .mini-slider { background: rgba(0,232,122,0.3); border: 1px solid var(--green); }
  .mini-toggle input:checked + .mini-slider::before { transform: translateX(16px); background: var(--green); }

  .variant-info { flex: 1; min-width: 0; }
  .variant-name { font-size: 11px; font-weight: 700; color: var(--text); margin-bottom: 4px; }
  .variant-props { display: flex; gap: 4px; flex-wrap: wrap; }
  .vprop { font-size: 9px; padding: 1px 5px; border-radius: 3px; font-weight: 700; }
  .vprop-fly      { background: rgba(0,180,255,0.15); color: #00b4ff; }
  .vprop-ride     { background: rgba(255,140,0,0.15); color: #ff8c00; }
  .vprop-neon     { background: rgba(0,230,118,0.15); color: #00e676; }
  .vprop-meganeon { background: rgba(148,3,252,0.2);  color: #c060ff; }

  /* Price input inside variant row */
  .variant-price-wrap { display: flex; align-items: center; gap: 6px; flex-shrink: 0; }
  .variant-price-wrap .currency-icon {
    width: 16px; height: 16px;
    background-image: url('https://bit.ly/4he4nSx'); background-size: cover; flex-shrink: 0;
  }
  .variant-price-input {
    width: 80px; background: var(--bg); border: 1px solid var(--border); border-radius: 8px;
    padding: 7px 8px; color: var(--text); font-family: 'Space Mono', monospace;
    font-size: 14px; font-weight: 700; outline: none; transition: border-color 0.2s; text-align: center;
  }
  .variant-price-input:focus { border-color: var(--accent); }
  .variant-row.v-in .variant-price-input { border-color: rgba(0,232,122,0.25); color: var(--green); }
  .variant-row.v-out .variant-price-input { color: var(--muted); }

  .empty-state { text-align: center; padding: 48px 16px; color: var(--muted); font-size: 13px; }
  .empty-state div:first-child { font-size: 32px; margin-bottom: 12px; }
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login-screen">
  <div class="login-box">
    <div class="login-logo">ADOPT ME</div>
    <div class="login-sub">ADMIN PANEL</div>
    <input type="password" class="login-input" id="password-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
      onkeydown="if(event.key==='Enter')doLogin()">
    <button class="login-btn" onclick="doLogin()">–í–û–ô–¢–ò</button>
    <div class="login-error" id="login-error">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å</div>
  </div>
</div>

<!-- MAIN -->
<div id="main-panel">
  <header>
    <div class="header-left">üêæ ADOPT ME ADMIN</div>
    <div class="header-right">
      <button class="save-btn" id="save-btn" onclick="saveToJsonBin()">üíæ –°–û–•–†–ê–ù–ò–¢–¨</button>
      <button class="logout-btn" onclick="doLogout()">–í–´–ô–¢–ò</button>
    </div>
  </header>
  <div class="status-bar"><div class="status-msg" id="status-msg"></div></div>

  <div class="container">
    <div class="stats-row">
      <div class="stat-card"><div class="stat-num purple" id="stat-total">0</div><div class="stat-label">–ü–ò–¢–û–ú–¶–ï–í</div></div>
      <div class="stat-card"><div class="stat-num green"  id="stat-variants-in">0</div><div class="stat-label">–í–ê–†–ò–ê–ù–¢–û–í –í –ù–ê–õ.</div></div>
      <div class="stat-card"><div class="stat-num red"    id="stat-variants-out">0</div><div class="stat-label">–í–ê–†–ò–ê–ù–¢–û–í –ù–ï–¢</div></div>
    </div>

    <div class="toolbar">
      <input class="search-box" id="admin-search" placeholder="üîç –ü–æ–∏—Å–∫ –ø–∏—Ç–æ–º—Ü–∞..." oninput="renderPets()">
    </div>

    <div class="pet-grid" id="pet-grid"></div>
  </div>
</div>

<script>
const ADMIN_PASSWORD  = 'admin123';
const JSONBIN_API_KEY = '$2a$10$6idOYJmOKc78n2HB5S9rJ.28KChL7KuD1RgeWyqkqC8W8SnGVGnFu';
const JSONBIN_BIN_ID  = '699b789843b1c97be994a1ac';

const PROP_LABELS = {
  ride:     'üêé Ride',
  fly:      '‚úàÔ∏è Fly',
  neon:     'üü¢ Neon',
  meganeon: 'üíú Mega',
};

const VARIANTS = [
  { key: 'base',              props: [],                       label: '–ë–∞–∑–æ–≤—ã–π',            defaultPrice: 10 },
  { key: 'ride',              props: ['ride'],                  label: 'Ride',               defaultPrice: 18 },
  { key: 'fly',               props: ['fly'],                   label: 'Fly',                defaultPrice: 15 },
  { key: 'flyride',           props: ['fly','ride'],            label: 'Fly + Ride',         defaultPrice: 23 },
  { key: 'neon',              props: ['neon'],                  label: 'Neon',               defaultPrice: 40 },
  { key: 'neon_fly',          props: ['neon','fly'],            label: 'Neon + Fly',         defaultPrice: 55 },
  { key: 'neon_ride',         props: ['neon','ride'],           label: 'Neon + Ride',        defaultPrice: 48 },
  { key: 'neon_fly_ride',     props: ['neon','fly','ride'],     label: 'Neon + Fly + Ride',  defaultPrice: 63 },
  { key: 'meganeon',          props: ['meganeon'],              label: 'MegaNeon',           defaultPrice: 90 },
  { key: 'meganeon_fly',      props: ['meganeon','fly'],        label: 'Mega + Fly',         defaultPrice: 105 },
  { key: 'meganeon_ride',     props: ['meganeon','ride'],       label: 'Mega + Ride',        defaultPrice: 98 },
  { key: 'meganeon_fly_ride', props: ['meganeon','fly','ride'], label: 'Mega + Fly + Ride',  defaultPrice: 113 },
];

const PETS_BASE = [
  {
    id: 'cat', name: 'Cat', rarity: 'common',
    canFly: true, canRide: true, canNeon: true, canMeganeon: true,
    image: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg5OOiKnn1NmXkDCafFRmBxZ38SKwtmJaZJLJbEtNhY-1iMA08lSL77LW2Fr2clsMLvfWNF5FD3ulSS2WXp610WQEFW3NjjObIG02tTq3NP6mcqe03ZpdWFXYb6_x1lnSa2Xpt4In-EHMSIePZNmygEN4zHqUP3JL8MLMjmVH7n8lplLuTAhujlxX5YIqA/s128/Cat_Icon.webp',
  },
  {
    id: 'dog', name: 'Dog', rarity: 'common',
    canFly: true, canRide: true, canNeon: true, canMeganeon: true,
    image: 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEicYvUjghtePc2ZsdMwulLKmfQgndZQvFeQtrkvxwgKjecg0XK_6l-1IqDwrS0qgHi3-j17m1RsNq5tzmTDaVsJAIFu_czL-Sxr3R0zFnbrsQdvWw-eS9au4KfRqIkpUeVuIQLjVYI0MwKJF17NEGtsmc-TarjLf7w5QFOyJj768qH-VYDUxobY-rqn2I8/s70/Dog.webp',
  }
];

let stockData = {};

function isVariantValid(pet, variant) {
  const p = variant.props;
  if (p.includes('fly')      && !pet.canFly)      return false;
  if (p.includes('ride')     && !pet.canRide)     return false;
  if (p.includes('neon')     && !pet.canNeon)     return false;
  if (p.includes('meganeon') && !pet.canMeganeon) return false;
  if (p.includes('neon')     && p.includes('meganeon')) return false;
  return true;
}

function getSD(id) {
  if (!stockData[id]) stockData[id] = {};
  const sd  = stockData[id];
  const pet = PETS_BASE.find(p => p.id === id);

  if (!sd.variants) sd.variants = {};
  VARIANTS.forEach(v => {
    if (!isVariantValid(pet, v)) return;
    if (!sd.variants[v.key]) {
      sd.variants[v.key] = { inStock: true, price: v.defaultPrice };
    }
  });

  // inStock = true –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –≤–∫–ª—é—á—ë–Ω
  sd.inStock = Object.values(sd.variants).some(x => x.inStock);
  return sd;
}

// =============================================
// LOGIN
// =============================================
function doLogin() {
  const val = document.getElementById('password-input').value;
  if (val === ADMIN_PASSWORD) {
    document.getElementById('login-screen').style.display = 'none';
    document.getElementById('main-panel').style.display = 'block';
    loadFromJsonBin();
  } else {
    document.getElementById('login-error').style.display = 'block';
    document.getElementById('password-input').value = '';
  }
}
function doLogout() {
  document.getElementById('login-screen').style.display = 'flex';
  document.getElementById('main-panel').style.display = 'none';
  document.getElementById('password-input').value = '';
}

// =============================================
// JSONBIN
// =============================================
async function loadFromJsonBin() {
  showStatus('–ó–∞–≥—Ä—É–∑–∫–∞...', 'loading');
  try {
    const res = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}/latest`, {
      headers: { 'X-Master-Key': JSONBIN_API_KEY }
    });
    if (!res.ok) throw new Error('–û—à–∏–±–∫–∞ ' + res.status);
    const data = await res.json();
    stockData = data.record || {};
    showStatus('–ó–∞–≥—Ä—É–∂–µ–Ω–æ ‚úì', 'success');
  } catch(e) {
    showStatus('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + e.message, 'error');
  }
  PETS_BASE.forEach(p => getSD(p.id));
  renderPets();
  updateStats();
}

async function saveToJsonBin() {
  const btn = document.getElementById('save-btn');
  btn.disabled = true;
  showStatus('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...', 'loading');
  try {
    const res = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json', 'X-Master-Key': JSONBIN_API_KEY },
      body: JSON.stringify(stockData)
    });
    if (!res.ok) throw new Error('–û—à–∏–±–∫–∞ ' + res.status);
    showStatus('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ‚úì –ú–∞–≥–∞–∑–∏–Ω –æ–±–Ω–æ–≤–ª—ë–Ω', 'success');
  } catch(e) {
    showStatus('–û—à–∏–±–∫–∞: ' + e.message, 'error');
  }
  btn.disabled = false;
}

// =============================================
// UI
// =============================================
function showStatus(msg, type) {
  const el = document.getElementById('status-msg');
  el.textContent = msg;
  el.className = 'status-msg show ' + type;
  if (type === 'success') setTimeout(() => el.classList.remove('show'), 3500);
}

function updateStats() {
  let varIn = 0, varOut = 0;
  PETS_BASE.forEach(pet => {
    const sd = getSD(pet.id);
    VARIANTS.forEach(v => {
      if (!isVariantValid(pet, v)) return;
      if (sd.variants[v.key]?.inStock) varIn++; else varOut++;
    });
  });
  document.getElementById('stat-total').textContent        = PETS_BASE.length;
  document.getElementById('stat-variants-in').textContent  = varIn;
  document.getElementById('stat-variants-out').textContent = varOut;
}

// =============================================
// ACTIONS
// =============================================
function toggleGlobal(petId) {
  const sd  = getSD(petId);
  const pet = PETS_BASE.find(p => p.id === petId);
  const newState = !sd.inStock;
  VARIANTS.forEach(v => {
    if (isVariantValid(pet, v) && sd.variants[v.key]) {
      sd.variants[v.key].inStock = newState;
    }
  });
  sd.inStock = newState;
  updateStats();
  rerenderCard(petId);
}

function toggleVariant(petId, variantKey) {
  const sd = getSD(petId);
  if (!sd.variants[variantKey]) return;
  sd.variants[variantKey].inStock = !sd.variants[variantKey].inStock;
  sd.inStock = Object.values(sd.variants).some(x => x.inStock);
  updateStats();

  const card = document.querySelector(`[data-id="${petId}"]`);
  if (!card) return;

  const row = card.querySelector(`[data-vkey="${variantKey}"]`);
  if (row) {
    const isOn = sd.variants[variantKey].inStock;
    row.className = `variant-row ${isOn ? 'v-in' : 'v-out'}`;
    const inp = row.querySelector('input[type=checkbox]');
    if (inp) inp.checked = isOn;
  }

  const globalInp = card.querySelector('.global-toggle');
  const globalLbl = card.querySelector('.toggle-label');
  if (globalInp) globalInp.checked = sd.inStock;
  if (globalLbl) {
    globalLbl.textContent = sd.inStock ? '–í –ù–ê–õ–ò–ß–ò–ò' : '–ù–ï–¢';
    globalLbl.className = 'toggle-label ' + (sd.inStock ? 'in' : 'out');
  }
  card.classList.toggle('globally-off', !sd.inStock);
}

function updateVariantPrice(petId, variantKey, val, inputEl) {
  const sd  = getSD(petId);
  if (!sd.variants[variantKey]) return;
  const num = parseFloat(val);
  if (!isNaN(num) && num >= 0) {
    sd.variants[variantKey].price = num;
  } else {
    if (inputEl) inputEl.value = sd.variants[variantKey].price;
  }
}

function rerenderCard(petId) {
  const old = document.querySelector(`[data-id="${petId}"]`);
  if (!old) return;
  const tmp = document.createElement('div');
  tmp.innerHTML = buildPetCard(PETS_BASE.find(p => p.id === petId));
  old.replaceWith(tmp.firstElementChild);
}

// =============================================
// BUILD CARD
// =============================================
function buildPetCard(pet) {
  const sd = getSD(pet.id);

  const variantsHTML = VARIANTS
    .filter(v => isVariantValid(pet, v))
    .map(v => {
      const vd    = sd.variants[v.key] || { inStock: false, price: v.defaultPrice };
      const isOn  = vd.inStock;
      const price = vd.price;
      const propsHTML = v.props.map(p =>
        `<span class="vprop vprop-${p}">${PROP_LABELS[p]}</span>`
      ).join('');

      return `
        <div class="variant-row ${isOn ? 'v-in' : 'v-out'}" data-vkey="${v.key}">
          <label class="mini-toggle">
            <input type="checkbox" ${isOn ? 'checked' : ''} onchange="toggleVariant('${pet.id}','${v.key}')">
            <span class="mini-slider"></span>
          </label>
          <div class="variant-info">
            <div class="variant-name">${v.label}</div>
            ${v.props.length ? `<div class="variant-props">${propsHTML}</div>` : ''}
          </div>
          <div class="variant-price-wrap">
            <div class="currency-icon"></div>
            <input class="variant-price-input" type="number" inputmode="decimal" min="0" step="0.1"
              value="${price}"
              onchange="updateVariantPrice('${pet.id}','${v.key}',this.value,this)"
              onclick="this.select()">
          </div>
        </div>`;
    }).join('');

  return `
    <div class="pet-card${sd.inStock ? '' : ' globally-off'}" data-id="${pet.id}">
      <div class="pet-card-top">
        <img class="pet-img" src="${pet.image}" alt="${pet.name}" loading="lazy">
        <div class="pet-info">
          <div class="pet-name">${pet.name}</div>
          <span class="badge badge-rarity-${pet.rarity}">${pet.rarity.toUpperCase()}</span>
        </div>
        <div class="toggle-wrap">
          <label class="toggle">
            <input type="checkbox" class="global-toggle" ${sd.inStock ? 'checked' : ''} onchange="toggleGlobal('${pet.id}')">
            <span class="slider"></span>
          </label>
          <span class="toggle-label ${sd.inStock ? 'in' : 'out'}">${sd.inStock ? '–í –ù–ê–õ–ò–ß–ò–ò' : '–ù–ï–¢'}</span>
        </div>
      </div>

      <div class="variants-section">
        <div class="section-title">–í–∞—Ä–∏–∞–Ω—Ç—ã ‚Äî –Ω–∞–ª–∏—á–∏–µ –∏ —Ü–µ–Ω–∞</div>
        <div class="variants-list">${variantsHTML}</div>
      </div>
    </div>`;
}

// =============================================
// RENDER
// =============================================
function renderPets() {
  const search   = document.getElementById('admin-search').value.toLowerCase();
  const grid     = document.getElementById('pet-grid');
  const filtered = PETS_BASE.filter(p => p.name.toLowerCase().includes(search));

  if (filtered.length === 0) {
    grid.innerHTML = `<div class="empty-state"><div>üîç</div>–ü–∏—Ç–æ–º—Ü—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>`;
    return;
  }
  grid.innerHTML = filtered.map(p => buildPetCard(p)).join('');
}
</script>
</body>
</html>
